<!DOCTYPE html>
<html lang="en">

<head>

  <link rel="stylesheet" href="login.css">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>login</title>
  <link rel="icon" type="image/x-icon" href="images/logo5.png" sizes=" 16x16">
  <link href="/favicon.ico" type="image/x-icon" rel="icon" />


  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <link href='https://fonts.googleapis.com/css?family=Oswald:300' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Familjen Grotesk' rel='stylesheet'>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- MDB -->
<link rel="stylesheet" href="css/mdb.min.css" />
<!-- MDB icon -->
<link rel="icon" href="img/logo.png" type="image/x-icon" />
</head>


<body class="Site d-flex flex-column min-vh-100"  id="index">
  <main class="site-wrapper">






    <section class="vh-100">
      <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-md-9 col-lg-6 col-xl-5">
            <img src="img/eClinicLogo-blue.png"
              class="img-fluid" alt="Sample image">
          </div>
          <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
            <form class="login">
              <div class="d-flex flex-row align-items-center justify-content-center ">
                <p class="lead fw-normal display-5">log in</p>
              
              </div>
    
              <div class="divider d-flex align-items-center my-4">
                
              </div>
    
              <!-- Email input -->
              <div class="txt_field form-outline mb-4">
                <input  name="email" id="form3Example3" class="form-control form-control-lg"
                  placeholder="Enter a valid email address" >
                <label class="form-label" for="form3Example3">Email address</label>
              </div>
    
              <!-- Password input -->
              <div class="txt_field form-outline mb-3">
                <input type="password" name="password" id="form3Example4" class="form-control form-control-lg"
                  placeholder="Enter password" >
                <label class="form-label" for="form3Example4">Password</label>
              </div>
    
            
              <div class="d-flex justify-content-between align-items-center">
                <!-- Simple link -->
                <a href="reset.html">Forgot password?</a>
              </div>
    
              <div class="text-center text-lg-start mt-4 pt-2">
                <button  class="logbut btn btn-primary btn-lg"
                  style="padding-left: 2.5rem; padding-right: 2.5rem;">Login</button>
                
              </div>
    
            </form>
          </div>
        </div>
      </div>
      <div
        class="text-center text-md-start  py-4 px-4 px-xl-5 ">
        <!-- Copyright -->
        <footer class="footer_eClinic mt-auto">
          <p class="text-white" style="text-align: center;">Copyright &copy; All rights reserved to King Saud University. This website made with ü§ç by eClinic teams.
          </p>
        </footer>
        <!-- Copyright -->
    
        
      </div>
    </section>








  <!-- MDB -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <!-- Custom scripts -->
  <script type="text/javascript"></script>
  <!-- JavaScript Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
    integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
    crossorigin="anonymous"></script>


    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
      import { getFirestore, doc, collection, getDocs, getDoc} from "https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore.js";
      // Your web app's Firebase configuration
      import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-auth.js"; //import for authentication 
      const firebaseConfig = {
        apiKey: "AIzaSyD6JcSscRU6XaF3SaCF_U3ggXAFYUnKKq8",
        authDomain: "eclinic-d5dec.firebaseapp.com",
        projectId: "eclinic-d5dec",
        storageBucket: "eclinic-d5dec.appspot.com",
        messagingSenderId: "148819771062",
        appId: "1:148819771062:web:f66c9a362b2fc34f247017"
      };

      // Initialize Firebase services 
      const app = initializeApp(firebaseConfig);
      const db = getFirestore()
      const auth = getAuth()




      /////////////////////////////////////////login ////////////////////////////////////////
      const loginform = document.querySelector('.login')
      loginform.addEventListener('submit', (e) => {
        e.preventDefault()
        //extract admin input 
        
        const email = loginform.email.value

        const password = loginform.password.value
        if (email.length < 1 || password.length < 1) {
          alert('Please fill all fields')
        }
        else {

          
          //buldin function: we send the admin info to authenticate 
          signInWithEmailAndPassword(auth, email, password)
            .then((cred) => {
              
              console.log("user logged in:")
              window.location.replace("index.html")//return tohomepage
            })
            .catch((err) => {
              console.log(err.message)
              const error = err.message
              const errorcode = err.code
              //error meassage(wrong email or password)
              if (error === "Firebase: Error (auth/user-not-found)." || error === "Firebase: Error (auth/wrong-password)." || error === "Firebase: Error (auth/invalid-email).")
                alert("Invalid Email or Password")

            })
        } //else close
      })
    
      ///////////////////////////there is no Auth for each of your app's pages in login////////////////////////////


    </script>
  </main>
  
</body>

</html>