<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="home.css">
  <link rel="stylesheet" href="login.css">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>login</title>
  <link rel="icon" type="image/x-icon" href="images/logo5.png" sizes=" 16x16">
  <link href="/favicon.ico" type="image/x-icon" rel="icon" />

</head>
<header class="header_eClinic">
  <div class="img1">
    <a href="index.html"> <img class="logo" src="images/logo5.png" alt="logo"></a>
  </div>
  <div class="container blue topBotomBordersOut">
  </div>

</header>

<body class="Site">
  <main class="site-wrapper">

    <div class="center">
      <h1>Login</h1>
      <form class="login">
        <div class="txt_field">
          <input type="text" name="email" placeholder="Email" class="effect-8">
          <span class="focus-border"></span>

        </div>
        <div class="txt_field">
          <input type="text" name="password" placeholder="Password" class="effect-8">
          <span class="focus-border"></span>
        </div>
        <a href="reset.html" class="foget">Forget Password?</a>
        <button class="logbut">login</button>
<br>

      </form>
    </div>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
      import { getFirestore, doc, collection, getDocs, getDoc } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-firestore.js";
      // Your web app's Firebase configuration
      import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-auth.js"; //import for authentication 
      const firebaseConfig = {
        apiKey: "AIzaSyD6JcSscRU6XaF3SaCF_U3ggXAFYUnKKq8",
        authDomain: "eclinic-d5dec.firebaseapp.com",
        projectId: "eclinic-d5dec",
        storageBucket: "eclinic-d5dec.appspot.com",
        messagingSenderId: "148819771062",
        appId: "1:148819771062:web:f66c9a362b2fc34f247017"
      };

      // Initialize Firebase services 
      const app = initializeApp(firebaseConfig);
      const db = getFirestore()
      const auth = getAuth() 
      

   

      /////////////////////////////////////////login ////////////////////////////////////////
      const loginform = document.querySelector('.login')
      loginform.addEventListener('submit', (e) => {
        e.preventDefault()
        //extract admin input 
        const email = loginform.email.value
        const password = loginform.password.value
        if (email.length < 1 || password.length < 1) {
          alert('Please fill all fileds')
        }
        else {
          //buldin function: we send the admin info to authenticate 
          signInWithEmailAndPassword(auth, email, password)
            .then((cred) => {
              console.log("user logged in:")
              window.location.replace("index.html")//return tohomepage
            })
            .catch((err) => {
              console.log(err.message)
              const error = err.message
              const errorcode =err.code
             //error meassage(wrong email or password)
              if (error === "Firebase: Error (auth/user-not-found)." || error === "Firebase: Error (auth/wrong-password)." || error ==="Firebase: Error (auth/invalid-email).")
                alert("Invalid Email or Password")
               
            })
        } //else close
      })

      ///////////////////////////there is no Auth for each of your app's pages in login////////////////////////////
      

    </script>
  </main>
  <footer class="footer_eClinic">
    <small>Copyright &copy; All rights reserved to King Saud University. This website made with ðŸ’™ by eClinic teams.
    </small>
  </footer>
</body>

</html>